.tile(data-name='Variant Manager')
    .tile-image(style="background: url('images/app-variant-manager.png') no-repeat;background-size:contain;")
    .tile-details
        .tile-title Variants Manager
        .tile-subtitle Engineers and Product Managers can define variants of an existing product design. This helps creating BOM variants based on color, material or other properties with ease.
        .tile-access 
            .tile-endpoint /variants
            .tile-button.button.default(href="https://youtu.be/v6ZZN3Xo-BM" target="_blank") Play Video
    .instructions
        h1 Features 
        ul 
            li Manage variant items that inherit master data from the base item
            li 3D viewer helps to identify the right items
            li Keep multiple BOM structures in sync
            li Manage multiple variants at the same time or focus a single variant only
            li Dynamically define the properties that define a variant
        h1 New Workspace Item Variants 
        p A new workspace is required to manage the item variants and their BOMs. These item variants in this new workspace will refer to the given base item to allow for data reuse by using derived fields, but will also have additional fields that define a variant (i.e. color, material, dimeions, serial #, ...). Customers can choose any properties they like for these variant specific properties, the application will adjust accordingly.
        h2 Create new workspace
        p Use the 
            strong Workspace Manager 
            |to create new workspace 
            strong Item Variants 
            |as revision controlled workspace. 
            img.border(src='images/apps/variant-manager-1.png' style='max-width:1092px;')
        h2 Set Item Details of new workspace
        p Create the following 3 sections in tab 
            strong Item Details 
            |: 
        ul
            li Header
            li Variant Definition
            li Base Item Details
        p Add the following fields to section 
            strong Header
            |:
            table   
                tr 
                    th Field name
                    th Field ID
                    th Data Type
                    th Visible on preview
                    th Field Length / Options
                    th Visibility
                    th Editable
                tr 
                    td Base Item
                    td BASE_ITEM
                    td Picklist to [WS] Items
                    td true
                    td Single Selection
                    td Always
                    td True
                tr 
                    td Title
                    td TITLE
                    td Single Line Text
                    td true
                    td 200
                    td Always
                    td True
                tr 
                    td BASE_ROOT_DMS_ID
                    td BASE_ROOT_DMS_ID
                    td Single Line Text
                    td false
                    td 20
                    td Never
                    td True
        p Add a field that derives the Number of the selected 
            strong Base Item 
            |in section 
            strong Base Item Details:
        img.border(src='images/apps/variant-manager-11.png' style='max-width:738px;')            
        p Additionally, add all further data that should be derived from the 
            strong Base Item 
            | in this section. You can add any derived field you want in order to copy data from the given 
            strong Base Item
            |. This may for example include Type and Description. However, Image fields are not supported.
        p Finally, add all the fields that will be used to define a variant (for example Colour and Material) in section 
            strong Variant Definition
            |. This section may include any type of field, including pick lists (with single selection) but not Images. The fields of this section later on will be used to automatically generate a title for the new variant items being created. See the follwoing properties in file settings.js as described in a later step.
        p.code 
            span config.variants.newItemVariantsTitle.fieldsToConcatenate : ['COLOUR', 'MATERIAL']
            span config.variants.newItemVariantsTitle.separator : ' / '
        img.border(src='images/apps/variant-manager-4.png' style='max-width:773px;')
        h2 Descriptor
        p Set the workspace's 
            strong Descriptor 
            | to display the fields 
            strong Base Item Number
            | and 
            strong Title
            |:
        img.border(src='images/apps/variant-manager-5.png' style='max-width:492px;')
        h2 Bill of Materials tab
        p Add a new BOM field 
            strong BASE_BOM_PATH 
            |of type 
            strong Single Line Text
            |. This field should have a length of 1000 characters and not be visible, but editable.
        p Clone the 
            strong Default View 
            |to create a new BOM view with name 
            strong Variant Manager
            |. This view should contain the following columns only (sequence does not matter):
            table   
                tr 
                    th Field ID
                    th Field Source 
                    th Remarks
                tr 
                    td Descriptor
                    td System Fields
                    td Included per default
                tr 
                    td Quantity
                    td BOM Fields
                    td Included per default
                tr 
                    td Base Item Number 
                    td Item Details Fields
                    td Custom field created in previous step
                tr 
                    td BASE_BOM_PATH
                    td BOM Fields
                    td Custom field just created before
                tr 
                    td BASE_ROOT_DMS_ID
                    td Item Details Fields
                    td Custom field created in previous step
        p Add all the Item Details fields of section 
            strong Variant Definition 
            |to this table as they are used to define the varians (for example Colour and Material).
        
        img.border(src='images/apps/variant-manager-10.png' style='max-width:1200px;')        
        h2 Workspace Relationships
        p Enable required 
            strong Workspace Relationships 
            |in the BOM and Relationships tabs:
        img.border(src='images/apps/variant-manager-2.png' style='max-width:895px;')
        
        h2 Tab Names (Optional Step)
        p Adjust the names and sequence of tabs as shown below.
        p   
            table 
                tr 
                    th Tab 
                    th Recommended Label 
                tr 
                    td Item Details 
                    td Item Variant 
                tr 
                    td Attachments 
                    td Files
                tr 
                    td Bill of Materials 
                    td Bill of Materials
                tr 
                    td Where Used 
                    td Where Used
                tr 
                    td Sourcing 
                    td Sourcing
                tr 
                    td Workflow 
                    td Related Change Processes
                tr 
                    td Relationships 
                    td Relationships
                tr 
                    td Change Log 
                    td Change Log
        
        h2 Access Permissions
        p Create a role for the new workspace enabling creation of new records, BOM management and attachments. Access to the Sourcing tab is not required, but can be granted to allow for cost comparison across variants. Make sure that users also can access the working versions of records.
        img.border(src='images/apps/variant-manager-3.png' style='max-width:336px;')
        h2 Server Settings File 
        p The Workspace ID of this new workspace 
            strong Item Variants 
            |must be provided in the server settings file. Locate the property 
            span.code config.variants.workspaceItemVariants.workspaceId 
            |and update the given value.
        img.border(src='images/apps/variant-manager-9.png' style='max-width:523px;')
        
        h1 Adjust Change Management Workspaces
        p As 
            strong Item Variants 
            |are revision controlled, add this new workspace to the 
            strong Workspace Relationships 
            |in tab 
            strong Managed Items 
            | of the following workspaces: 
            ul 
                li Problem Reports
                li Change Requests
                li Change Orders
        
        h1 Adjust Items Workspace
        
        h2 Configure BOM View 
        p The application requires a BOM view in workspace 
            strong Items 
            |with at least the following columns: 
            table   
                tr 
                    th Field
                    th Field Source 
                tr 
                    td Descriptor
                    td System Fields
                tr 
                    td Quantity
                    td BOM Fields
                tr 
                    td Number
                    td Item Details Fields
        p This view will be used to expand the base BOM. You may reuse an existing view (i.e. Basic) or add a new view instead. While this given view may also contain further columns without impacting the Variant Manager, the performance of the editor will be better the less columns are contained in this BOM view.
        p If you prefer to / or cannot use the BOM view 
            strong Basic
            |, you have to speficfy this view's name in the server's settings file in parameter.
        p.code 
            span config.variants.workspaceItems.bomViewName : 'Basic'      
        h2 Add Button
        p Users should be able to launch the 
            strong Variant Manager 
            |from any item of workspace 
            strong Items 
            |in PLM. This can be achieved easily by installing the 
            strong Chrome Extension 
            |that is provided with this UX package and which can be used in Mircrosoft Edge and Goolge Chrome. Click the following button to learn about the installation of this extension. Once this Chrome Extension is installed, the given button will automatically be displayed in the header of each item and you can proceed with the next chapter.
        a(href='chrome-extension' target='_blank') Setup Chrome Extension 
        br
        br
        p If you cannot / don't want to use this extension, you will instead have to add a computed field in the 
            strong Item Details 
            |page which renders the given button. This also requires a field to store the dmsID in a hidden field.
        h3 Add hidden field to store dmsID
        p If not present yet, add a new 
            storng Single Line Text 
            |field with id 
            strong DMS_ID 
            | in the 
            strong Items 
            |workspace. This field should not be visible. Let this field be set automatically at item creation by script as shown below. 
            br
            |Tenants created mid 2023 or later have this field and script already.
        p.code  
            span item.DMS_ID = dmsID;
        h3 Add Computed Field with Action Button 
        p Enable access to the 
            strong Variants Manager 
            | by adding a new computed field to your 
            strong Items 
            | workspace. Use the following formula for the new field: 
        p.code '&lt;a style="border: 1px solid #bec8d2;border-radius:3px;color: #0a131c;font-weight:600;line-height:32px;padding:4px 20px;text-align:center;text-decoration:none !important;white-space:nowrap;" target="_blank" href ="LOCATIONvariants?wsId=57&dmsId='||DMS_ID||'"&gt;Variant Manager&lt;/a&gt;'
        
        h1 Optional: Integrate With Products Workspace
        p Instead of starting the Variant Manager from an item, you can also start it from a product. In this case, the product's 
            strong Engineering BOM 
            |will be used as a basis and all variants will be stored within the product's list of variants (the grid tab). Perform the following steps to enable this integrated feature.
        h2 Adjust Grid tab of workspace Products
        p Add a column BOM to the grid based on a pick list for workspace Item Variants: 
        img.border(src='images/apps/variant-manager-8.png' style='max-width:1422px;')
        h2 Add Button
        p Users should be able to launch the 
            strong Variant Manager 
            |from any product. This can be achieved easily by installing the 
            strong Chrome Extension 
            |that is provided with this UX package and which can be used in Mircrosoft Edge and Goolge Chrome. Once this Chrome Extension is installed, the given button will automatically be displayed in the header of each product. The default configuration of this extension will use the field 
            strong ENGINEERING_BOM 
            |of workspace 
            strong Products 
            |to locate the matching item. If this field does not exist, you will have to update the given button's configuration in settings.js. Click the following button to learn about the installation and configuration of this extension. 
        a(href='chrome-extension' target='_blank') Setup and configure Chrome Extension 
        br
        br
        p If you cannot / don't want to use this extension, you will instead have to add a computed field in the 
            strong Item Details 
            |page of Products which renders the given button. This also requires a field to store the dmsID in a hidden field.
        h3 Add hidden field to store dmsID
        p If not present yet, add a new 
            storng Single Line Text 
            |field with id 
            strong DMS_ID 
            | in the 
            strong Products 
            |workspace. This field should not be visible. 
            br
            |Let this field be set automatically at item creation by script as shown below. 
        p.code  
            span item.DMS_ID = dmsID;
        h3 Add Computed Field with Action Button 
        p Enable access to the 
            strong Variants Manager 
            | app by using the computed field formula shown below. Note that this formula must be adjusted if your product's EBOM is not stored in field    
            strong ENGINEERING_BOM
            |. You also must replace the workspace ID of 95 with the id of your 
            strong Products 
            |workspace.
        p.code '&lt;a style="border: 1px solid #bec8d2;border-radius:3px;color: #0a131c;font-weight:600;line-height:32px;padding:4px 20px;text-align:center;text-decoration:none !important;white-space:nowrap;" target="_blank" href ="LOCATIONvariants?wsId=95&dmsId='||DMS_ID||'&options=fieldIdEBOM:ENGINEERING_BOM"&gt;Variant Manager&lt;/a&gt;'
        h1 Server Settings File Details
        p If you require usage of different field names, table names etc, please have a look at the settings.js file and locate section variants, listing all possible configurable settings as shown below. You will have to change the first option's value ( 
            strong workspaceItemVariants.workspaceId 
            |) which must contain the workspace ID of your newly created workspace
            strong Item Variants
            |. You can retrieve this ID from your browser's URL when navigating to this workspace using the workspaces menu. The remaining options are aligned with default tenants and the preceeding instructions already.
        p.code  
            span export.config = {
            span.indent variants : {
            span.indent-2 workspaceItems : {
            span.indent-3 bomViewName : 'Basic'
            span.indent-2 },
            span.indent-2 workspaceItemVariants : {
            span.indent-3 workspaceId : 373,
            span.indent-3 sectionLabel : 'Variant Definition',
            span.indent-3 fieldIds : {
            span.indent-4 baseItem : 'BASE_ITEM',
            span.indent-4 title : 'TITLE',
            span.indent-4 rootDMSId : 'BASE_ROOT_DMS_ID'
            span.indent-3 },
            span.indent-3 bomFieldIdBaseBOMPath : 'BASE_BOM_PATH',
            span.indent-3 bomViewName : 'Variant Manager'
            span.indent-2 },
            span.indent-2 newItemVariantsTitle : {
            span.indent-3 fieldsToConcatenate : ['COLOUR', 'MATERIAL'],
            span.indent-3 separator : ' / '
            span.indent-2 },
            span.indent-2 maxBOMLevels : 4
            span.indent-2 viewerFeatures : {..}
            span.indent }
            span }
        p Adjust these settings if needed and restart your server afterwards to apply the given changes.
            table 
                tr 
                    th Setting 
                    th Default Value 
                    th Description  
                tr 
                    td workspaceItems.bomViewName
                    td 'Basic'
                    td BOM view of workspace Items which contains the required (and minimal) fields                    
                tr
                    td workspaceItemVariants.workspaceId
                    td -
                    td Workspace ID of your new 
                        strong Item Variants 
                        |workspace
                tr  
                    td workspaceItemVariants.sectionLabel
                    td 'Variant Definition' 
                    td Name of section in the Item Variants workspace which contians all the fields that define a variant. 
                        br
                        |This section will drive the columns of the Variant Manager display.
                tr 
                    td workspaceItemVariants.fieldIds.baseItem
                    td 'BASE_ITEM' 
                    td Field ID of the Item Variants workspace that links to the matching base item (single select picklist)
                tr 
                    td workspaceItemVariants.fieldIds.title
                    td 'TITLE' 
                    td Field ID of the Item Variants workspace that stores the title being generated automaticall
                tr 
                    td workspaceItemVariants.fieldIds.rootDMSId
                    td 'BASE_ROOT_DMS_ID' 
                    td Field ID of your Item Variants workspace that stores the dmsId of the matching root item
                tr 
                    td workspaceItemVariants.bomFieldIdBaseBOMPath
                    td 'BASE_BOM_PATH' 
                    td BOM Field ID of your Item Variants workspace that stores the matching item's BOM path
                tr 
                    td workspaceItemVariants.bomViewName
                    td 'Variant Manager' 
                    td BOM view of workspace Item Variants which contains the required fields    
                tr 
                    td newItemVariantsTitle.fieldsToConcatenate
                    td ['COLOUR', 'MATERIAL']
                    td If this array is not empty, the given fields' values will be concatenated to generate the title of newly created item variants
                tr 
                    td newItemVariantsTitle.separator
                    td [' / ']
                    td If the previous array is not empty, this string will be used to separate the given fields' values in the title
                tr 
                    td maxBOMLevels
                    td 4
                    td This integer defines the maximum BOM levels to be expanded in the Variant Manager
        h2 Configuring Viewer Features
        include ../framework/viewer.pug
    .log 
        h1 Variant Manager Change Log 
        table 
            tr 
                td 28. October 2025
                td Quality
                td The quality and reliability of this solutions has been further enhanced. Review the updated setup instructions and the new settings.js properties before using this new update.
            tr 
                td 7. May 2025
                td Quality
                td The quality and reliability of this solutions has been enhanced. Please follow the revised setup instructions before using this solution.
            tr 
                td 28. June 2024
                td Viewer Features Configuration
                td Additional settings were added to settings.js enabling to select the features available in the viewer
            tr 
                td 7. July 2023
                td Initial Release
                td This is the very first version of this application